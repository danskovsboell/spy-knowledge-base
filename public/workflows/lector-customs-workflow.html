<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lector Told-Integration - SPY System</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="/workflows/i18n.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --spy-black: #1a1a1a;
            --spy-dark: #0f0f0f;
            --spy-gold: #c9a227;
            --spy-white: #ffffff;
            --spy-gray: #888888;
            --spy-gray-light: #b3b3b3;
            --spy-gray-dark: #333333;
            --customs-blue: #2c5282;
            --customs-blue-light: #4299e1;
            --success-color: #38a169;
            --warning-color: #dd6b20;
            --error-color: #e53e3e;
            --inbound-color: #805ad5;
            --outbound-color: #3182ce;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: 'Raleway', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--spy-black);
            min-height: 100vh;
            padding: 40px;
            color: var(--spy-white);
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { 
            text-align: center; 
            margin-bottom: 10px; 
            font-size: 2.2em;
            font-weight: 600;
        }
        .subtitle { text-align: center; color: var(--spy-gray); margin-bottom: 15px; font-size: 1.1em; }
        .intro-box {
            background: rgba(44, 82, 130, 0.2);
            border: 1px solid var(--customs-blue);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        .intro-box h3 { color: var(--customs-blue-light); margin-bottom: 10px; }
        .intro-box p { color: var(--spy-gray-light); line-height: 1.6; }
        
        .key-concept {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.2), rgba(44, 82, 130, 0.2));
            border: 2px solid var(--spy-gold);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }
        .key-concept h3 { color: var(--spy-gold); margin-bottom: 15px; font-size: 1.3em; }
        .key-concept p { color: var(--spy-white); line-height: 1.8; font-size: 1.05em; }
        .key-concept strong { color: var(--spy-gold); }
        
        .workflow-section {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--spy-gray-dark);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .section-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--spy-gold);
            font-weight: 600;
        }
        .section-subtitle {
            color: var(--spy-gray);
            font-size: 0.95em;
            margin-bottom: 20px;
            font-style: italic;
        }
        
        .flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .flow-box {
            background: var(--spy-dark);
            border: 1px solid var(--spy-gray-dark);
            border-radius: 12px;
            padding: 15px;
            min-width: 120px;
            max-width: 150px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .flow-box:hover {
            border-color: var(--spy-gold);
            transform: translateY(-2px);
        }
        
        .flow-box.spy { border-top: 3px solid var(--spy-gold); }
        .flow-box.customs { border-top: 3px solid var(--customs-blue); }
        .flow-box.supplier { border-top: 3px solid var(--inbound-color); }
        .flow-box.customer { border-top: 3px solid var(--success-color); }
        .flow-box.warehouse { border-top: 3px solid #805ad5; }
        .flow-box.notold { border-top: 3px solid var(--success-color); background: rgba(72, 187, 120, 0.1); }
        .flow-box.success { border-top: 3px solid var(--success-color); }
        .flow-box.warning { border-top: 3px solid var(--warning-color); }
        .flow-box.error { border-top: 3px solid var(--error-color); }
        .flow-box.response { border-top: 3px solid var(--customs-blue-light); background: rgba(66, 153, 225, 0.1); }
        
        .flow-box-icon { font-size: 2em; margin-bottom: 8px; }
        .flow-box-title { font-weight: 600; margin-bottom: 5px; color: var(--spy-white); font-size: 0.85em; }
        .flow-box-desc { font-size: 0.75em; color: var(--spy-gray); line-height: 1.4; }
        
        .arrow { font-size: 1.5em; color: var(--spy-gold); }
        .arrow-response { font-size: 1.5em; color: var(--customs-blue-light); }
        .arrow-bidirectional { font-size: 1.5em; color: var(--spy-gold); }
        
        .highlight-box {
            background: rgba(72, 187, 120, 0.15);
            border: 2px solid var(--success-color);
            border-radius: 10px;
            padding: 15px 20px;
            margin: 20px 0;
            text-align: center;
        }
        .highlight-box p { color: var(--spy-white); font-size: 1em; }
        .highlight-box strong { color: var(--success-color); }
        
        .highlight-box.warning {
            background: rgba(221, 107, 32, 0.15);
            border-color: var(--warning-color);
        }
        .highlight-box.warning strong { color: var(--warning-color); }
        
        .highlight-box.error {
            background: rgba(229, 62, 62, 0.15);
            border-color: var(--error-color);
        }
        .highlight-box.error strong { color: var(--error-color); }
        
        .why-box {
            background: linear-gradient(135deg, rgba(44, 82, 130, 0.15), rgba(201, 162, 39, 0.1));
            border: 1px solid var(--customs-blue);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .why-box h4 { color: var(--customs-blue-light); margin-bottom: 12px; font-size: 1.1em; }
        .why-box ul { list-style: none; padding: 0; }
        .why-box li { 
            padding: 8px 0; 
            color: var(--spy-gray-light); 
            font-size: 0.95em;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .why-box li:last-child { border-bottom: none; }
        .why-box li::before { content: "‚úì "; color: var(--success-color); font-weight: bold; }
        
        .example-box {
            background: var(--spy-dark);
            border-left: 4px solid var(--spy-gold);
            border-radius: 0 8px 8px 0;
            padding: 15px 20px;
            margin: 15px 0;
        }
        .example-box h5 { color: var(--spy-gold); margin-bottom: 8px; font-size: 0.95em; }
        .example-box p { color: var(--spy-gray-light); font-size: 0.9em; line-height: 1.5; }
        
        .destination-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .destination-card {
            background: var(--spy-dark);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--spy-gray-dark);
        }
        .destination-card h4 { font-size: 1.5em; margin-bottom: 8px; }
        .destination-card .country { color: var(--spy-gold); font-weight: 600; margin-bottom: 5px; }
        .destination-card .duty { color: var(--spy-gray-light); font-size: 0.85em; }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .info-card {
            background: var(--spy-dark);
            border: 1px solid var(--spy-gray-dark);
            border-radius: 10px;
            padding: 18px;
        }
        .info-card-title {
            font-weight: 600;
            color: var(--spy-gold);
            margin-bottom: 10px;
            font-size: 1em;
        }
        .info-card-list {
            list-style: none;
            padding: 0;
        }
        .info-card-list li {
            padding: 5px 0;
            color: var(--spy-gray-light);
            font-size: 0.85em;
        }
        .info-card-list li::before {
            content: "‚Üí ";
            color: var(--spy-gold);
        }
        
        .legend {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85em;
        }
        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
        }
        .legend-color.spy { background: var(--spy-gold); }
        .legend-color.customs { background: var(--customs-blue); }
        .legend-color.supplier { background: var(--inbound-color); }
        .legend-color.customer { background: var(--success-color); }
        .legend-color.warehouse { background: #805ad5; }
        .legend-color.success { background: var(--success-color); }
        .legend-color.warning { background: var(--warning-color); }
        .legend-color.error { background: var(--error-color); }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .summary-card {
            background: var(--spy-dark);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--spy-gray-dark);
        }
        .summary-card.import { border-top: 3px solid var(--inbound-color); }
        .summary-card.export { border-top: 3px solid var(--outbound-color); }
        .summary-card.warehouse { border-top: 3px solid #805ad5; }
        .summary-card.update { border-top: 3px solid var(--customs-blue-light); }
        .summary-card h4 { font-size: 1em; margin-bottom: 8px; }
        .summary-card p { font-size: 0.8em; color: var(--spy-gray); }
        
        .status-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        .status-badge {
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }
        .status-badge.pending { background: rgba(128, 128, 128, 0.3); border: 1px solid var(--spy-gray); }
        .status-badge.sent { background: rgba(49, 130, 206, 0.3); border: 1px solid var(--outbound-color); }
        .status-badge.received { background: rgba(128, 90, 213, 0.3); border: 1px solid var(--inbound-color); }
        .status-badge.validated { background: rgba(201, 162, 39, 0.3); border: 1px solid var(--spy-gold); }
        .status-badge.confirmed { background: rgba(56, 161, 105, 0.3); border: 1px solid var(--success-color); }
        .status-badge.rejected { background: rgba(229, 62, 62, 0.3); border: 1px solid var(--error-color); }
        .status-badge.warning { background: rgba(221, 107, 32, 0.3); border: 1px solid var(--warning-color); }
        
        .status-arrow { color: var(--spy-gray); font-size: 1.2em; }
        
        .error-code-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.85em;
        }
        .error-code-table th, .error-code-table td {
            padding: 10px 12px;
            border: 1px solid var(--spy-gray-dark);
            text-align: left;
        }
        .error-code-table th {
            background: var(--spy-dark);
            color: var(--spy-gold);
        }
        .error-code-table td {
            background: rgba(0,0,0,0.2);
            color: var(--spy-gray-light);
        }
        .error-code-table .code { color: var(--error-color); font-family: monospace; }
        .error-code-table .warning-code { color: var(--warning-color); font-family: monospace; }
        
        .docs-box {
            background: linear-gradient(135deg, rgba(44, 82, 130, 0.2), rgba(44, 82, 130, 0.1));
            border: 2px solid var(--customs-blue);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .docs-box h4 { color: var(--customs-blue-light); margin-bottom: 15px; }
        .docs-box p { color: var(--spy-gray-light); margin-bottom: 10px; }
        .docs-box a { color: var(--customs-blue-light); text-decoration: none; }
        .docs-box a:hover { text-decoration: underline; }
        
        .footer-text {
            text-align: center;
            color: var(--spy-gray);
            margin-top: 30px;
            font-size: 0.85em;
        }
        .footer-text span { color: var(--spy-gold); }

        /* Support/Technical Toggle */
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 0;
            margin-bottom: 30px;
        }
        .view-toggle button {
            padding: 10px 28px;
            border: 1px solid var(--spy-gray-dark);
            background: var(--spy-dark);
            color: var(--spy-gray);
            cursor: pointer;
            font-family: 'Raleway', sans-serif;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
            outline: none;
        }
        .view-toggle button:first-child {
            border-radius: 20px 0 0 20px;
            border-right: none;
        }
        .view-toggle button:last-child {
            border-radius: 0 20px 20px 0;
        }
        .view-toggle button.active {
            background: var(--spy-gold);
            border-color: var(--spy-gold);
            color: var(--spy-black);
            font-weight: 600;
        }
        .view-toggle button:hover:not(.active) {
            border-color: var(--spy-gold);
            color: var(--spy-white);
        }
        .tech-only.hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const Arrow = () => <span className="arrow">‚Üí</span>;
        const ArrowResponse = () => <span className="arrow-response">‚Üê</span>;
        const ArrowBidirectional = () => <span className="arrow-bidirectional">‚Üî</span>;
        const StatusArrow = () => <span className="status-arrow">‚Üí</span>;
        
        const FlowBox = ({ icon, title, desc, type }) => (
            <div className={`flow-box ${type}`}>
                <div className="flow-box-icon">{icon}</div>
                <div className="flow-box-title">{title}</div>
                <div className="flow-box-desc">{desc}</div>
            </div>
        );
        
        const StatusBadge = ({ status, children }) => (
            <span className={`status-badge ${status}`}>{children}</span>
        );
        
        const LectorWorkflow = ({ t = (k) => k, locale = 'da' }) => {
            const [viewMode, setViewMode] = React.useState(() => {
                try { return localStorage.getItem('kb-view-mode') || 'support'; } catch(e) { return 'support'; }
            });
            const techClass = viewMode === 'support' ? 'tech-only hidden' : 'tech-only';
            return (
                <div className="container">
                    <h1>{t("üõÉ Lector Told-Integration")}</h1>
                    <p className="subtitle">{t("S√•dan fungerer toldoplag og Lector-integrationen i SPY")}</p>

                    <div className="view-toggle">
                        <button className={viewMode === 'support' ? 'active' : ''} onClick={() => { setViewMode('support'); try { localStorage.setItem('kb-view-mode', 'support'); } catch(e) {} }}>
                            {t("Support")}
                        </button>
                        <button className={viewMode === 'tech' ? 'active' : ''} onClick={() => { setViewMode('tech'); try { localStorage.setItem('kb-view-mode', 'tech'); } catch(e) {} }}>
                            {t("Technical")}
                        </button>
                    </div>

                    
                    <div className="key-concept">
                        <h3>{t("üí° Det vigtigste at forst√•")}</h3>
                        <p>
                            {t("N√•r kunden har et")} <strong>{t("toldoplag")}</strong>{t(", betales der")} <strong>{t("IKKE told ved import")}</strong> {t("til Danmark.")}<br/><br/>
                            {t("Told betales")} <strong>{t("f√∏rst n√•r varerne sendes ud")}</strong> {t("‚Äì fordi man s√• ved, hvor de skal hen, og hvor tolden skal betales.")}
                        </p>
                    </div>
                    
                    <div className="intro-box">
                        <h3>{t("Hvad er Lector?")}</h3>
                        <p>
                            {t("Lector er et")} <strong>{t("told-system")}</strong> {t("der h√•ndterer dokumentation for varer p√• toldoplag. SPY sender automatisk information til Lector, n√•r varer ankommer og n√•r de sendes ud.")}
                            <br/><br/>
                            <strong>{t("Kommunikationen er tovejs:")}</strong> {t("SPY sender data ‚Üí Lector svarer med bekr√¶ftelse, told-beregning eller fejlbesked.")}
                        </p>
                    </div>
                    
                    <div className="legend">
                        <div className="legend-item">
                            <div className="legend-color supplier"></div>
                            <span>{t("Leverand√∏r/Inbound")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color spy"></div>
                            <span>{t("SPY System")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color warehouse"></div>
                            <span>{t("Toldoplag")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color customs"></div>
                            <span>{t("Lector (Told)")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color customer"></div>
                            <span>{t("Kunde/Success")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color warning"></div>
                            <span>{t("Advarsel")}</span>
                        </div>
                        <div className="legend-item">
                            <div className="legend-color error"></div>
                            <span>{t("Fejl")}</span>
                        </div>
                    </div>
                    
                    {/* TOVEJS KOMMUNIKATION */}
                    <div className={`workflow-section ${techClass}`}>
                        <h2 className="section-title">{t("üîÑ SPY ‚Üî Lector Kommunikation")}</h2>
                        <p className="section-subtitle">{t("Integrationen er tovejs ‚Äì SPY sender data, og Lector svarer tilbage")}</p>
                        
                        <div className="flow-container">
                            <FlowBox icon="üì§" title={t("SPY sender")} desc={t("Inbound, Outbound, Warehouse")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üõÉ" title={t("Lector")} desc={t("Modtager og behandler")} type="customs" />
                            <ArrowResponse />
                            <FlowBox icon="üì•" title={t("SPY modtager svar")} desc={t("Told-beregning eller fejlbesked fra Lector")} type="spy" />
                        </div>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--customs-blue-light)'}}>{t("Hvad sender Lector tilbage?")}</h4>
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title" style={{color: 'var(--success-color)'}}>{t("‚úÖ Bekr√¶ftelser")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Besked modtaget korrekt")}</li>
                                    <li>{t("Data valideret OK")}</li>
                                    <li>{t("Registrering gennemf√∏rt")}</li>
                                    <li>{t("Told-dokument genereret")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title" style={{color: 'var(--spy-gold)'}}>{t("üí∞ Told-beregninger")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Beregnet toldbel√∏b")}</li>
                                    <li>{t("Anvendt toldsats")}</li>
                                    <li>{t("Moms-beregning")}</li>
                                    <li>{t("Reference til told-dokument")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title" style={{color: 'var(--error-color)'}}>{t("‚ùå Fejlbeskeder")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Valideringsfejl")}</li>
                                    <li>{t("Manglende data")}</li>
                                    <li>{t("Ugyldig toldkode")}</li>
                                    <li>{t("Systemfejl fra Lector")}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    {/* STATUS-FLOW FOR EN BESKED */}
                    <div className={`workflow-section ${techClass}`}>
                        <h2 className="section-title">{t("üìä Livscyklus for en Lector-besked")}</h2>
                        <p className="section-subtitle">{t("S√•dan bev√¶ger en besked sig gennem systemet")}</p>
                        
                        <h4 style={{marginTop: '15px', marginBottom: '15px', color: 'var(--success-color)'}}>{t("‚úÖ Normal flow (success):")}</h4>
                        <div className="status-flow">
                            <StatusBadge status="pending">{t("Afventer")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="sent">{t("Sendt")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="received">{t("Modtaget")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="validated">{t("Valideret")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="confirmed">{t("Bekr√¶ftet")}</StatusBadge>
                        </div>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--error-color)'}}>{t("‚ùå Fejl-flow:")}</h4>
                        <div className="status-flow">
                            <StatusBadge status="pending">{t("Afventer")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="sent">{t("Sendt")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="received">{t("Modtaget")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="rejected">{t("Afvist")}</StatusBadge>
                        </div>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--warning-color)'}}>{t("‚ö†Ô∏è Timeout/Retry-flow:")}</h4>
                        <div className="status-flow">
                            <StatusBadge status="pending">{t("Afventer")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="sent">{t("Sendt")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="warning">{t("Timeout")}</StatusBadge>
                            <StatusArrow />
                            <StatusBadge status="sent">{t("Retry")}</StatusBadge>
                        </div>
                        
                        <div className="example-box">
                            <h5>{t("üí° Tip")}</h5>
                            <p>
                                {t("Alle statusser kan ses i")} <strong>{t("SPY ‚Üí Integrationsloggen")}</strong>. 
                                {t("Se efter \"Lector\" beskeder og tjek deres status.")}
                            </p>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üì• Trin 1: Varer ankommer (INGEN TOLD)")}</h2>
                        <p className="section-subtitle">{t("Varer fra leverand√∏r udenfor EU ankommer til toldoplaget")}</p>
                        
                        <div className="flow-container">
                            <FlowBox icon="üè≠" title={t("Leverand√∏r")} desc={t("Sender varer fra f.eks. Kina")} type="supplier" />
                            <Arrow />
                            <FlowBox icon="üö¢" title={t("Transport")} desc={t("Varer p√• vej til DK")} type="supplier" />
                            <Arrow />
                            <FlowBox icon="üìã" title={t("SPY registrerer")} desc={t("Inbound til Lector")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üõÉ" title={t("Lector")} desc={t("Dokumenterer ankomst")} type="customs" />
                            <Arrow />
                            <FlowBox icon="üè≠" title={t("Toldoplag")} desc={t("Varer opbevares")} type="warehouse" />
                        </div>
                        
                        <div className="flow-container" style={{marginTop: '15px'}}>
                            <FlowBox icon="‚úÖ" title={t("Lector svarer")} desc={t("Bekr√¶ftelse til SPY")} type="response" />
                            <ArrowResponse />
                            <FlowBox icon="üìã" title={t("SPY opdateres")} desc={t("Status: Registreret")} type="spy" />
                        </div>
                        
                        <div className="highlight-box">
                            <p>‚úÖ <strong>{t("Ingen told betales!")}</strong> {t("Varerne ligger p√• toldoplag med \"suspenderet\" told.")}</p>
                        </div>
                        
                        <div className="example-box">
                            <h5>{t("üí° Eksempel")}</h5>
                            <p>
                                {t("1.000 jakker ankommer fra Kina. De registreres i Lector og placeres p√• toldoplaget. Der betales IKKE told endnu ‚Äì jakkerne \"venter\" bare p√• at blive solgt.")}
                            </p>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üì§ Trin 2: Varer sendes ud (NU BETALES TOLD)")}</h2>
                        <p className="section-subtitle">{t("N√•r en kunde bestiller, sendes varerne ud og told betales baseret p√• destination")}</p>
                        
                        <div className="flow-container">
                            <FlowBox icon="üõí" title={t("Ordre")} desc={t("Kunde bestiller")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üè≠" title={t("Toldoplag")} desc={t("Varer plukkes")} type="warehouse" />
                            <Arrow />
                            <FlowBox icon="üì§" title={t("SPY sender")} desc={t("Outbound til Lector")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üõÉ" title={t("Lector")} desc={t("Beregner told")} type="customs" />
                        </div>
                        
                        <div className="flow-container" style={{marginTop: '15px'}}>
                            <FlowBox icon="üí∞" title={t("Lector svarer")} desc={t("Told-beregning")} type="response" />
                            <ArrowResponse />
                            <FlowBox icon="üìã" title={t("SPY modtager svar")} desc={t("Toldbel√∏b, toldsats og moms registreres")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üè†" title={t("Kunde")} desc={t("Modtager varer")} type="customer" />
                        </div>
                        
                        <div className="highlight-box">
                            <p>üí∞ <strong>{t("NU betales told!")}</strong> {t("Toldsatsen afh√¶nger af hvor varerne sendes hen.")}</p>
                        </div>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--spy-gold)'}}>{t("Told afh√¶nger af destination:")}</h4>
                        <div className="destination-grid">
                            <div className="destination-card">
                                <h4>üá©üá∞</h4>
                                <div className="country">{t("Danmark / EU")}</div>
                                <div className="duty">{t("EU-told betales (typisk 12% p√• t√∏j)")}</div>
                            </div>
                            <div className="destination-card">
                                <h4>üá≥üá¥</h4>
                                <div className="country">{t("Norge")}</div>
                                <div className="duty">{t("Norsk told (varen eksporteres)")}</div>
                            </div>
                            <div className="destination-card">
                                <h4>üá∫üá∏</h4>
                                <div className="country">{t("USA")}</div>
                                <div className="duty">{t("Amerikansk told (varen eksporteres)")}</div>
                            </div>
                            <div className="destination-card">
                                <h4>üá®üá≠</h4>
                                <div className="country">{t("Schweiz")}</div>
                                <div className="duty">{t("Schweizisk told (varen eksporteres)")}</div>
                            </div>
                        </div>
                        
                        <div className="example-box">
                            <h5>{t("üí° Eksempel")}</h5>
                            <p>
                                {t("En dansk butik bestiller 50 jakker ‚Üí")} <strong>{t("EU-told betales")}</strong><br/>
                                {t("En norsk butik bestiller 30 jakker ‚Üí")} <strong>{t("Varen eksporteres")}</strong>{t(", norsk told betales i Norge")}
                            </p>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üìä Trin 3: L√∏bende lagerrapportering")}</h2>
                        <p className="section-subtitle">{t("SPY rapporterer l√∏bende hvad der ligger p√• toldoplaget")}</p>
                        
                        <div className="flow-container">
                            <FlowBox icon="üìä" title={t("SPY Lager")} desc={t("Varer p√• toldoplag")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üì§" title={t("Warehouse")} desc={t("Rapport sendes")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üõÉ" title={t("Lector")} desc={t("Modtager rapport")} type="customs" />
                            <Arrow />
                            <FlowBox icon="‚úÖ" title={t("Bekr√¶ftet")} desc={t("Lector svarer OK")} type="success" />
                        </div>
                        
                        <div className="why-box">
                            <h4>{t("Hvorfor rapportere lagerbeholdning?")}</h4>
                            <ul>
                                <li>{t("Toldmyndighederne skal vide hvad der ligger p√• toldoplaget")}</li>
                                <li>{t("Varer uden betalt told skal dokumenteres")}</li>
                                <li>{t("Sikrer at alt er korrekt n√•r varer sendes ud")}</li>
                            </ul>
                        </div>
                    </div>
                    
                    {/* POST IMPORT UPDATE - NY SEKTION */}
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üîÑ Post Import Update (Rettelser)")}</h2>
                        <p className="section-subtitle">{t("N√•r der skal rettes i data efter den oprindelige registrering")}</p>
                        
                        <div className="flow-container">
                            <FlowBox icon="‚úèÔ∏è" title={t("Fejl opdages")} desc={t("Data skal rettes")} type="warning" />
                            <Arrow />
                            <FlowBox icon="üìù" title={t("SPY sender")} desc={t("Post Import Update")} type="spy" />
                            <Arrow />
                            <FlowBox icon="üõÉ" title={t("Lector")} desc={t("Behandler rettelse")} type="customs" />
                            <Arrow />
                            <FlowBox icon="‚úÖ" title={t("Opdateret")} desc={t("Rettelse bekr√¶ftet")} type="success" />
                        </div>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--spy-gold)'}}>{t("Hvorn√•r bruges Post Import Update?")}</h4>
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("üì¶ M√¶ngder")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Antal stk var forkert")}</li>
                                    <li>{t("V√¶gt skal justeres")}</li>
                                    <li>{t("Kartoner talt forkert")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üè∑Ô∏è Varedata")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Toldkode skal √¶ndres")}</li>
                                    <li>{t("Oprindelsesland forkert")}</li>
                                    <li>{t("Varebeskrivelse mangelfuld")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üí∞ V√¶rdier")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Fakturabel√∏b √¶ndret")}</li>
                                    <li>{t("Valutakurs justeret")}</li>
                                    <li>{t("Fragtomkostninger rettet")}</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div className="example-box">
                            <h5>{t("üí° Eksempel: Typiske scenarier")}</h5>
                            <p>
                                <strong>{t("Scenario 1:")}</strong> {t("Ved ankomst registreres 1.000 jakker, men ved opt√¶lling er der kun 980 stk. ‚Üí Send Post Import Update med korrekt antal.")}<br/><br/>
                                <strong>{t("Scenario 2:")}</strong> {t("Leverand√∏ren sender rettet faktura med nyt bel√∏b ‚Üí Send Post Import Update med ny v√¶rdi.")}<br/><br/>
                                <strong>{t("Scenario 3:")}</strong> {t("Toldkoden p√• en style viser sig at v√¶re forkert ‚Üí Ret i SPY og send Post Import Update.")}
                            </p>
                        </div>
                        
                        <div className="highlight-box warning">
                            <p>‚ö†Ô∏è <strong>{t("Vigtigt:")}</strong> {t("Post Import Update skal sendes hurtigst muligt efter fejlen opdages. Told-myndigheder kr√¶ver korrekt dokumentation.")}</p>
                        </div>
                    </div>
                    
                    {/* FEJLH√ÖNDTERING - NY SEKTION */}
                    <div className={`workflow-section ${techClass}`}>
                        <h2 className="section-title">{t("‚ö†Ô∏è Fejlh√•ndtering")}</h2>
                        <p className="section-subtitle">{t("Hvad sker n√•r noget g√•r galt?")}</p>
                        
                        <h4 style={{marginTop: '15px', marginBottom: '15px', color: 'var(--error-color)'}}>{t("Typiske fejlkoder fra Lector:")}</h4>
                        <table className="error-code-table">
                            <thead>
                                <tr>
                                    <th>{t("Kode")}</th>
                                    <th>{t("Beskrivelse")}</th>
                                    <th>{t("L√∏sning")}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td className="code">VAL001</td>
                                    <td>{t("Manglende toldkode")}</td>
                                    <td>{t("Tilf√∏j HS-kode p√• style i SPY")}</td>
                                </tr>
                                <tr>
                                    <td className="code">VAL002</td>
                                    <td>{t("Ugyldig toldkode")}</td>
                                    <td>{t("Kontroll√©r at HS-koden er korrekt")}</td>
                                </tr>
                                <tr>
                                    <td className="code">VAL003</td>
                                    <td>{t("Manglende oprindelsesland")}</td>
                                    <td>{t("Tilf√∏j country of origin p√• stylen")}</td>
                                </tr>
                                <tr>
                                    <td className="warning-code">WARN001</td>
                                    <td>{t("Unormalt h√∏j v√¶rdi")}</td>
                                    <td>{t("Verific√©r at fakturabel√∏b er korrekt")}</td>
                                </tr>
                                <tr>
                                    <td className="code">SYS001</td>
                                    <td>{t("Lector utilg√¶ngelig")}</td>
                                    <td>{t("System pr√∏ver automatisk igen")}</td>
                                </tr>
                                <tr>
                                    <td className="code">SYS002</td>
                                    <td>{t("Timeout")}</td>
                                    <td>{t("Afvent eller kontakt support")}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h4 style={{marginTop: '25px', marginBottom: '15px', color: 'var(--warning-color)'}}>{t("Retry-strategi:")}</h4>
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("üîÑ Automatisk retry")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Ved timeout: 3 fors√∏g")}</li>
                                    <li>{t("Interval: 30 sek, 2 min, 10 min")}</li>
                                    <li>{t("Ved systemfejl: 5 fors√∏g")}</li>
                                    <li>{t("Derefter: Manuel h√•ndtering")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("‚è±Ô∏è Timeout-gr√¶nser")}</div>
                                <ul className="info-card-list">
                                    <li>{t("API-kald: 30 sekunder")}</li>
                                    <li>{t("Batch-upload: 5 minutter")}</li>
                                    <li>{t("Warehouse-rapport: 10 minutter")}</li>
                                    <li>{t("Ved overskridelse: SYS002-fejl")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üîç Find fejl i SPY")}</div>
                                <ul className="info-card-list">
                                    <li>{t("G√• til: Administration ‚Üí Integration")}</li>
                                    <li>{t("V√¶lg: Lector i filteret")}</li>
                                    <li>{t("Se: Fejlbeskeder og status")}</li>
                                    <li>{t("Eksport√©r: Fejllog til analyse")}</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div className="highlight-box error">
                            <p>‚ùå <strong>{t("Ved vedvarende fejl:")}</strong> {t("Tjek integrationsloggen i SPY. Hvis fejlen ikke kan l√∏ses, kontakt Lector support med fejlkode og tidspunkt.")}</p>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üéØ Fordelen ved toldoplag")}</h2>
                        
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("üí∞ Likviditet")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Told betales f√∏rst ved salg")}</li>
                                    <li>{t("Ingen penge bundet i told")}</li>
                                    <li>{t("Bedre cash flow")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üéØ Fleksibilitet")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Varer kan sendes til alle lande")}</li>
                                    <li>{t("Told beregnes ved afsendelse")}</li>
                                    <li>{t("Eksport slipper for EU-told")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üìã Dokumentation")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Alt registreres automatisk")}</li>
                                    <li>{t("Lector holder styr p√• told")}</li>
                                    <li>{t("Revision-sikkert")}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üìã De 4 typer data SPY sender til Lector")}</h2>
                        
                        <div className="summary-grid">
                            <div className="summary-card import">
                                <h4>{t("üì• Inbound")}</h4>
                                <p>{t("Varer ankommer til toldoplag (INGEN told endnu)")}</p>
                            </div>
                            <div className="summary-card export">
                                <h4>{t("üì§ Outbound")}</h4>
                                <p>{t("Varer sendes ud (NU betales told)")}</p>
                            </div>
                            <div className="summary-card warehouse">
                                <h4>{t("üè≠ Warehouse")}</h4>
                                <p>{t("L√∏bende rapport over lagerbeholdning")}</p>
                            </div>
                            <div className="summary-card update">
                                <h4>{t("üîÑ Post Import Update")}</h4>
                                <p>{t("Rettelser efter registrering (antal, v√¶rdier, koder)")}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("‚ùì Ofte stillede sp√∏rgsm√•l")}</h2>
                        
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("Hvorn√•r bruges toldoplag?")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Ved import fra lande udenfor EU")}</li>
                                    <li>{t("N√•r man vil udskyde told")}</li>
                                    <li>{t("N√•r man s√¶lger til flere lande")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("Hvad er en toldkode?")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Et nummer der beskriver varetypen")}</li>
                                    <li>{t("Bruges til at beregne toldsats")}</li>
                                    <li>{t("S√¶ttes p√• hver style i SPY")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("Hvad sker automatisk?")}</div>
                                <ul className="info-card-list">
                                    <li>{t("SPY sender data til Lector")}</li>
                                    <li>{t("Lector validerer og bekr√¶fter")}</li>
                                    <li>{t("Fejl vises i integrationslog")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("Hvad hvis noget g√•r galt?")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Tjek integrationsloggen f√∏rst")}</li>
                                    <li>{t("Se fejlkode og beskrivelse")}</li>
                                    <li>{t("Ret data i SPY og gensend")}</li>
                                    <li>{t("Kontakt support ved systemfejl")}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üìå Vigtige begreber")}</h2>
                        
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("üè≠ Toldoplag")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Lager hvor told ikke er betalt")}</li>
                                    <li>{t("Varer \"venter\" p√• at blive solgt")}</li>
                                    <li>{t("Told betales ved udlevering")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üè∑Ô∏è Toldkode / HS-kode")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Internationalt varenummer")}</li>
                                    <li>{t("Bestemmer toldsatsen")}</li>
                                    <li>{t("F.eks. 6204.43 = damekjoler")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üåç Oprindelse")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Hvor varen er produceret")}</li>
                                    <li>{t("P√•virker toldsatsen")}</li>
                                    <li>{t("Skal dokumenteres")}</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üìú Incoterms")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Leveringsbetingelser")}</li>
                                    <li>{t("Hvem betaler fragt/told")}</li>
                                    <li>{t("F.eks. FOB, CIF, DAP")}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    {/* API DOKUMENTATION */}
                    <div className="workflow-section">
                        <h2 className="section-title">{t("üìö Dokumentation og Support")}</h2>
                        
                        <div className="docs-box">
                            <h4>{t("üìñ Lector API-dokumentation")}</h4>
                            <p>
                                {t("For teknisk dokumentation af Lector-integrationen, kontakt Lector support for adgang til deres API-dokumentation.")}
                            </p>
                            <p style={{marginTop: '15px'}}>
                                <strong>{t("Lector Support:")}</strong><br/>
                                üìß {t("E-mail:")} support@lector.dk<br/>
                                üìû {t("Telefon:")} {t("Se kontrakt-dokumenter")}
                            </p>
                        </div>
                        
                        <div className="info-grid">
                            <div className="info-card">
                                <div className="info-card-title">{t("üîß SPY Support")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Ved sp√∏rgsm√•l om SPY-ops√¶tning")}</li>
                                    <li>{t("Hj√¶lp til fejlfinding")}</li>
                                    <li>{t("Kontakt:")} support@spysystem.dk</li>
                                </ul>
                            </div>
                            <div className="info-card">
                                <div className="info-card-title">{t("üìã Nyttige links i SPY")}</div>
                                <ul className="info-card-list">
                                    <li>{t("Administration ‚Üí Integrationer")}</li>
                                    <li>{t("Lager ‚Üí Toldoplag")}</li>
                                    <li>{t("Rapporter ‚Üí Told-oversigt")}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <p className="footer-text">
                        {t("Genereret af")} <span>Nova</span> | SPY ApS | {new Date().toLocaleDateString(locale === 'en' ? 'en-GB' : 'da-DK')}<br/>
                        <em style={{fontSize: '0.9em'}}>{t("Guide til support-teamet")}</em>
                    </p>
                </div>
            );
        };
        
        // Initialize i18n and render with translations
        (async function() {
            const { locale, t } = await window.i18n.initI18n('lector-customs-workflow');
            ReactDOM.render(<LectorWorkflow t={t} locale={locale} />, document.getElementById('root'));
            window.i18n.autoApplyTranslations(200);
        })();
    </script>
</body>
</html>
